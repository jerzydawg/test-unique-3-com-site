---
import Layout from '../../layouts/Layout.astro';
import AboveFoldCTA from '../../components/AboveFoldCTA.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { getSiteURL, getDesignDNA } from '../../lib/site-config';

export const prerender = true;

const SITE_URL = getSiteURL();
const designDNA = getDesignDNA();

// All 50 states + DC + territories organized by region
const regionalStates = {
  'Northeast': [
    { name: 'Connecticut', abbr: 'CT', cities: 169 },
    { name: 'Delaware', abbr: 'DE', cities: 57 },
    { name: 'Maine', abbr: 'ME', cities: 488 },
    { name: 'Maryland', abbr: 'MD', cities: 157 },
    { name: 'Massachusetts', abbr: 'MA', cities: 351 },
    { name: 'New Hampshire', abbr: 'NH', cities: 234 },
    { name: 'New Jersey', abbr: 'NJ', cities: 565 },
    { name: 'New York', abbr: 'NY', cities: 1522 },
    { name: 'Pennsylvania', abbr: 'PA', cities: 2561 },
    { name: 'Rhode Island', abbr: 'RI', cities: 39 },
    { name: 'Vermont', abbr: 'VT', cities: 255 }
  ],
  'Southeast': [
    { name: 'Alabama', abbr: 'AL', cities: 461 },
    { name: 'Arkansas', abbr: 'AR', cities: 501 },
    { name: 'Florida', abbr: 'FL', cities: 411 },
    { name: 'Georgia', abbr: 'GA', cities: 535 },
    { name: 'Kentucky', abbr: 'KY', cities: 939 },
    { name: 'Louisiana', abbr: 'LA', cities: 305 },
    { name: 'Mississippi', abbr: 'MS', cities: 298 },
    { name: 'North Carolina', abbr: 'NC', cities: 553 },
    { name: 'South Carolina', abbr: 'SC', cities: 270 },
    { name: 'Tennessee', abbr: 'TN', cities: 346 },
    { name: 'Virginia', abbr: 'VA', cities: 229 },
    { name: 'West Virginia', abbr: 'WV', cities: 232 },
    { name: 'District of Columbia', abbr: 'DC', cities: 1 }
  ],
  'Midwest': [
    { name: 'Illinois', abbr: 'IL', cities: 1299 },
    { name: 'Indiana', abbr: 'IN', cities: 569 },
    { name: 'Iowa', abbr: 'IA', cities: 948 },
    { name: 'Kansas', abbr: 'KS', cities: 627 },
    { name: 'Michigan', abbr: 'MI', cities: 680 },
    { name: 'Minnesota', abbr: 'MN', cities: 854 },
    { name: 'Missouri', abbr: 'MO', cities: 952 },
    { name: 'Nebraska', abbr: 'NE', cities: 530 },
    { name: 'North Dakota', abbr: 'ND', cities: 357 },
    { name: 'Ohio', abbr: 'OH', cities: 938 },
    { name: 'South Dakota', abbr: 'SD', cities: 311 },
    { name: 'Wisconsin', abbr: 'WI', cities: 601 }
  ],
  'Southwest': [
    { name: 'Arizona', abbr: 'AZ', cities: 91 },
    { name: 'New Mexico', abbr: 'NM', cities: 106 },
    { name: 'Oklahoma', abbr: 'OK', cities: 594 },
    { name: 'Texas', abbr: 'TX', cities: 1216 }
  ],
  'West': [
    { name: 'Alaska', abbr: 'AK', cities: 149 },
    { name: 'California', abbr: 'CA', cities: 482 },
    { name: 'Colorado', abbr: 'CO', cities: 272 },
    { name: 'Hawaii', abbr: 'HI', cities: 151 },
    { name: 'Idaho', abbr: 'ID', cities: 201 },
    { name: 'Montana', abbr: 'MT', cities: 129 },
    { name: 'Nevada', abbr: 'NV', cities: 19 },
    { name: 'Oregon', abbr: 'OR', cities: 242 },
    { name: 'Utah', abbr: 'UT', cities: 245 },
    { name: 'Washington', abbr: 'WA', cities: 281 },
    { name: 'Wyoming', abbr: 'WY', cities: 99 }
  ]
};

const totalStates = Object.values(regionalStates).flat().length;
const totalCities = Object.values(regionalStates).flat().reduce((sum, s) => sum + s.cities, 0);

const title ="Free Government Phone by State | All 50 States + DC";
const description = `Find free government phone programs in all ${totalStates} US states. Browse ${totalCities.toLocaleString()}+ cities with Lifeline and ACP coverage.`;

const structuredData = {"@context":"https://schema.org","@type":"CollectionPage","name":"Free Government Phone Programs by State","description": description,"url": `${SITE_URL}/states/`,"numberOfItems": totalStates,"mainEntity": {"@type":"ItemList","numberOfItems": totalStates,"itemListElement": Object.values(regionalStates).flat().map((state, index) => ({"@type":"ListItem","position": index + 1,"name": state.name,"url": `${SITE_URL}/${state.abbr.toLowerCase()}/`
    }))
  }
};

const breadcrumbData = {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement": [
    {"@type":"ListItem","position": 1,"name":"Home","item": `${SITE_URL}/`
    },
    {"@type":"ListItem","position": 2,"name":"All States","item": `${SITE_URL}/states/`
    }
  ]
};

const regionColors: Record<string, string> = {
  'Northeast': 'from-blue-500 to-blue-600',
  'Southeast': 'from-green-500 to-green-600',
  'Midwest': 'from-amber-500 to-amber-600',
  'Southwest': 'from-orange-500 to-orange-600',
  'West': 'from-purple-500 to-purple-600'
};

const regionIcons: Record<string, string> = {
  'Northeast': 'üèôÔ∏è',
  'Southeast': 'üå¥',
  'Midwest': 'üåæ',
  'Southwest': 'üèúÔ∏è',
  'West': 'üèîÔ∏è'
};
---

<Layout title={title} description={description}>
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbData)} />
  
  <main class="min-h-screen bg-gray-50">
    <!-- Breadcrumbs -->
    <Breadcrumbs items={[
      { label: 'Home', href: '/' },
      { label: 'All States' }
    ]} />
    
    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-blue-600 to-purple-700 text-white py-10">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <h1 class="text-4xl md:text-5xl font-bold mb-6" style={`color: ${designDNA.colors.text};`}>
            Free Government Phone Programs by State
          </h1>
          <p class="text-xl md:text-2xl mb-8 text-blue-100" style={`color: ${designDNA.colors.text};`}>
            Browse all {totalStates} states with {totalCities.toLocaleString()}+ cities covered
          </p>

          <!-- CTA Above Fold -->
          <div class="mb-8" style={`color: ${designDNA.colors.text};`}>
            <AboveFoldCTA context="states-index" />
          </div>

          <div class="flex flex-wrap justify-center gap-4">
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
              <div class="text-3xl font-bold">{totalStates}</div>
              <div class="text-sm text-blue-100">States</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
              <div class="text-3xl font-bold">{totalCities.toLocaleString()}+</div>
              <div class="text-sm text-blue-100">Cities Covered</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
              <div class="text-3xl font-bold">100%</div>
              <div class="text-sm text-blue-100">Free Service</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Jump Navigation -->
    <section class="bg-white border-b sticky top-16 z-30">
      <div class="container mx-auto px-4 py-4">
        <div class="flex flex-wrap justify-center gap-2">
          {Object.keys(regionalStates).map((region) => (
            <a 
              href={`#${region.toLowerCase().replace(' ', '-')}`}
              class="px-4 py-2 hover:bg-blue-100 rounded-full text-sm font-medium hover:text-blue-700 transition-colors" style={`color: ${designDNA.colors.text};`}
            >
              {regionIcons[region]} {region}
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- States by Region -->
    <div class="container mx-auto px-4 py-8">
      {Object.entries(regionalStates).map(([region, states]) => (
        <section id={region.toLowerCase().replace(' ', '-')} class="mb-16 scroll-mt-32">
          <div class="flex items-center mb-8" style={`color: ${designDNA.colors.text};`}>
            <div class={`w-12 h-12 rounded-xl bg-gradient-to-r ${regionColors[region]} flex items-center justify-center text-white text-2xl mr-4`}>
              {regionIcons[region]}
            </div>
            <div>
              <h2 class="text-3xl font-bold" style={`color: ${designDNA.colors.text};`}>{region}</h2>
              <p class="" style={`color: ${designDNA.colors.text};`}>{states.length} states ‚Ä¢ {states.reduce((sum, s) => sum + s.cities, 0).toLocaleString()} cities</p>
            </div>
          </div>
          
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            {states.map((state) => (
              <a 
                href={`/${state.abbr.toLowerCase()}/`}
                class="group block bg-white rounded-xl p-5 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-200 hover:border-blue-400"
              >
                <div class="flex items-start justify-between mb-3" style={`color: ${designDNA.colors.text};`}>
                  <div class={`w-12 h-12 rounded-lg bg-gradient-to-r ${regionColors[region]} flex items-center justify-center text-white font-bold text-lg group-hover:scale-110 transition-transform`}>
                    {state.abbr}
                  </div>
                  <svg class="w-5 h-5 group-hover:text-blue-500 transition-colors" style={`color: ${designDNA.colors.text};`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                </div>
                <h3 class="font-semibold group-hover:text-blue-600 transition-colors mb-1" style={`color: ${designDNA.colors.text};`}>
                  {state.name}
                </h3>
                <p class="text-sm" style={`color: ${designDNA.colors.text};`}>
                  {state.cities.toLocaleString()} cities
                </p>
              </a>
            ))}
          </div>
        </section>
      ))}
    </div>

    <!-- CTA Section -->
    <section class="bg-gradient-to-r from-blue-600 to-purple-700 text-white py-10">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold mb-6" style={`color: ${designDNA.colors.text};`}>Ready to Get Your Free Government Phone?</h2>
        <p class="text-xl mb-8 max-w-2xl mx-auto" style={`color: ${designDNA.colors.text};`}>
          Government phone programs are available in all 50 states. Check your eligibility today!
        </p>
        <div class="flex justify-center">
          <a href="/apply" class="block md:inline-block w-full md:w-auto max-w-md md:max-w-none mx-auto py-4 px-10 text-lg font-bold rounded-xl shadow-lg hover:shadow-2xl transform hover:scale-105 active:scale-95 transition-all duration-300" style={`background: linear-gradient(135deg, ${designDNA.colors.accent} 0%, ${designDNA.colors.accentDark || designDNA.colors.accent} 100%); color: white;`}>
            Apply Now
          </a>
        </div>
      </div>
    </section>
  </main>
</Layout>

